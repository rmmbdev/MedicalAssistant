FROM python:3.10-slim-buster

WORKDIR /src

ENV PYTHONUNBUFFERED=1
ENV PYTHONPATH=/src

COPY src/bot /src
COPY src/celery /src
COPY src/utils /src

RUN pip install poetry && \
    poetry config virtualenvs.create false && \
    poetry install --no-interaction --no-ansi

RUN ls -la /src

CMD ["python", "/bot/main.py"]